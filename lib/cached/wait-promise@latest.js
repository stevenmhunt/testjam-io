!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).waitPromise=t()}}((function(){return function t(n,e,r){function i(o,f){if(!e[o]){if(!n[o]){var c="function"==typeof require&&require;if(!f&&c)return c(o,!0);if(u)return u(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[o]={exports:{}};n[o][0].call(l.exports,(function(t){return i(n[o][1][t]||t)}),l,l.exports,t,n,e,r)}return e[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,e){"use strict";function r(t,n,e,r){this.every(t,r),this.before(n),this.after(0|e)}r.prototype={before:function(t){return this.startTime=Date.now(),this.expires=this.startTime+t,this},and:function(t){return this.routine=t,this},after:function(t){return this.afterTime=t,this},every:function(t,n){return this.interval=t,null!=n&&this.limit(n),this},limit:function(t){return t=t>0?t:1/0,this.limit=t,this},check:function(t){return t=t||function(){},this.before(0).until(t)},forward:function(){return this.until((function(){return!1}))},till:function(t){var n=this;return this.until((function(){try{return!0===t()}catch(t){throw n.limit=0,t}}))},until:function(t){var n,e=this.interval,r=this.afterTime,i=this.routine,u=this,o=0;return new Promise((function(f,c){function s(){var e,r;i&&i(o),o++;try{r=t()}catch(t){e=t}finally{return Date.now()>=u.expires||o>=u.limit?(clearInterval(n),void 0!==e||!1===r?c(e||new Error("check failed")):f(r),!0):void 0===e&&!1!==r&&(clearInterval(n),f(r),!0)}}setTimeout((function(){s()||(n=setInterval(s,e))}),r)}))}},n.exports={every:function(t,n){return new r(t,1/0,0,n)},and:function(t){return new r(100,1/0,0).and(t)},limit:function(t){return new r(100,1/0,0,t)},before:function(t,n){return new r(100,t,0,n)},after:function(t){return new r(100,1/0,t)},sleep:function(t){return new r(100,1/0,t).check()},until:function(t){return new r(100,1/0).until(t)},forward:function(){return new r(100,1/0).forward()},till:function(t){return new r(100,1/0).till(t)},check:function(t){return new r(100,0).until(t)}}},{}]},{},[1])(1)}));